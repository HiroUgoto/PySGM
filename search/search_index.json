{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PySGM-jp","text":"<p>PySGM-jp \u306f\u3001\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\uff08Strong Ground Motion\uff09\u306e\u8aad\u307f\u8fbc\u307f\u3001\u51e6\u7406\u3001\u304a\u3088\u3073\u89e3\u6790\u3092\u884c\u3046\u305f\u3081\u306e Python \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002</p>"},{"location":"#_1","title":"\u4e3b\u306a\u6a5f\u80fd","text":"<ul> <li>\u5404\u7a2e\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff08K-NET/KiK-net, \u6c17\u8c61\u5e81\u306a\u3069\uff09\u306e\u8aad\u307f\u8fbc\u307f</li> <li>\u6700\u5927\u5024\uff0c\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u3001\u8a08\u6e2c\u9707\u5ea6\u306a\u3069\u306e\u8a08\u7b97</li> <li>\u30b7\u30f3\u30d7\u30eb\u306a\u8a18\u8ff0\u3067\u6ce2\u5f62\u51e6\u7406\u304c\u53ef\u80fd</li> </ul>"},{"location":"#_2","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5","text":"<p>\u4ee5\u4e0b\u306e\u3088\u3046\u306b\uff0cpip\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059</p> <pre><code>$ pip install PySGM-jp\n</code></pre>"},{"location":"#_3","title":"\u4f7f\u7528\u65b9\u6cd5\uff08\u4f8b\uff09","text":"<p>K-NET\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3067\uff0c\u6700\u5927\u52a0\u901f\u5ea6\uff08PGA\uff09\u3092\u6c42\u3081\u3066\u307f\u307e\u3057\u3087\u3046</p> <pre><code>import PySGM\n\nfile_name = \"~~~.EW\"  # .EW\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\nacc = PySGM.parse(file_name,fmt=\"nied\")   # \u81ea\u52d5\u7684\u306b .NS .UD \u30d5\u30a1\u30a4\u30eb\u3082\u8aad\u307f\u8fbc\u3093\u3067\uff0c3\u6210\u5206\u8a18\u9332\u3092vectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u72ec\u81ea\uff09\u306b\u5909\u63db\n\nacc.trend_removal()  # vectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u69d8\u3005\u306a\u89e3\u6790\u304c\u3067\u304d\u307e\u3059\uff0e\u307e\u305a\u306f\u57fa\u7dda\u88dc\u6b63\uff0e\nacc.peak_ground_3d() # 3\u6210\u5206\u5408\u6210\u306e\u6700\u5927\u52a0\u901f\u5ea6\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\n\nacc.output(\"~~~~~~~.acc\")  # \u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3067\u304d\u307e\u3059\n</code></pre>"},{"location":"#data-format","title":"Data Format","text":"<p>PySGM.parse\u3067\u6307\u5b9a\u53ef\u80fd\u306aformat\u3067\u3059\uff0e\u5897\u3048\u308b\u53ef\u80fd\u6027\u3082\u3042\u308a\u307e\u3059\uff0e</p> <ul> <li>fmt=\"vector\" (default)</li> </ul> <p>PySGM\u3067\u51fa\u529b\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3059\u308b</p> <ul> <li>fmt=\"nied\"</li> </ul> <p>\u9632\u707d\u79d1\u5b66\u6280\u8853\u7814\u7a76\u6240\u306eK-NET, KiK-net\u30c7\u30fc\u30bf\uff08ASCII\u5f62\u5f0f\uff09\u3092\u8aad\u307f\u8fbc\u3080\uff0e\u62e1\u5f35\u5b50\uff08.EW\uff0c.EW1\uff0c.EW2\uff09\u3067\u81ea\u52d5\u7684\u306b\u5224\u65ad\u3059\u308b\u306e\u3067\uff0cK-NET\uff0cKiK-net\u5730\u8868\uff0f\u5730\u4e2d\u306e\u533a\u5225\u306f\u4e0d\u8981</p> <ul> <li>fmt=\"jma\"</li> </ul> <p>\u6c17\u8c61\u5e81\u306e\u5f37\u9707\u8a18\u9332\u3092\u8aad\u307f\u8fbc\u3080\uff0e\u62e1\u5f35\u5b50\u304c.csv\u3067\u3042\u308c\u3070\uff0c\u6c17\u8c61\u5e81HP\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3081\u308b\uff0e\u305d\u306e\u4ed6\u306e\u62e1\u5f35\u5b50\u3067\u3042\u308c\u3070\uff0cDVD\u8a18\u9332\u3092\u8aad\u307f\u3053\u3081\u308b\uff0e</p>"},{"location":"#wave-analysis","title":"Wave Analysis","text":"<p>\u8aad\u307f\u8fbc\u307f\u5f8c\u306b\u5229\u7528\u53ef\u80fd\u306a\u89e3\u6790\u30c4\u30fc\u30eb\u7fa4\uff0e\u4ee5\u4e0b\u306e\u3088\u3046\u306bvectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3057\u305f\u3068\u3059\u308b\uff0e</p> <pre><code>vector = PySGM.parse(file_name)\n</code></pre> <ul> <li>\u57fa\u7dda\u88dc\u6b63</li> </ul> <pre><code>vector.trend_removal()\n</code></pre> <ul> <li>\u6700\u5927\u5024</li> </ul> <pre><code>vector.peak_ground_2d()  # \u6c34\u5e732\u6210\u5206\u5408\u6210\u5024\nvector.peak_ground_3d()  # 3\u6210\u5206\u5408\u6210\u5024\nPGA = vector.peak_ground_3d(print_result=False)  # \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u7d50\u679c\u3092\u51fa\u529b\u305b\u305a\u306b\uff0c\u5024\u3092\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\n</code></pre> <ul> <li>\u6c17\u8c61\u5e81\u8a08\u6e2c\u9707\u5ea6</li> </ul> <pre><code>vector.jma_seismic_intensity()\nJSI = vector.jma_seismic_intensity(print_result=False)  # \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u7d50\u679c\u3092\u51fa\u529b\u305b\u305a\u306b\uff0c\u5024\u3092\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\n</code></pre> <ul> <li>\u7a4d\u5206\uff08\u52a0\u901f\u5ea6-&gt;\u901f\u5ea6\uff09</li> </ul> <pre><code>vel = vector.integration()  # \u6570\u5024\u7a4d\u5206\u3055\u308c\u305f\u7d50\u679c\u304c\u5f97\u3089\u308c\u308b\uff0e\nvel = vector.integration(low=0.2,high=10)  # \u30c7\u30d5\u30a9\u30eb\u30c8\u306f0.2-50Hz\u306e\u5e2f\u57df\u901a\u904e\u30d5\u30a3\u30eb\u30bf\u6e08\u307f\u3060\u304c\uff0c\u5909\u66f4\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\nPGV = vel.peak_ground_2d(print_result=False)  # \u7d44\u307f\u5408\u308f\u305b\u308c\u3070\uff0cPGV\u3082\u6c42\u307e\u308a\u307e\u3059\n</code></pre> <ul> <li>\u6ce2\u5f62\u306e\u63cf\u753b</li> </ul> <pre><code>velocity.plot_all()   # 3\u6210\u5206\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u304c\u8868\u793a\u3055\u308c\u308b\nvelocity.plot_all(to_end=True)   # default\u3067\u306f0-60\u79d2\u9593\u306e\u307f\u306e\u8868\u793a\uff0e\u8a18\u9332\u5168\u4f53\u3092\u8868\u793a\u3059\u308b\u306b\u306fto_end=True\u3068\u3059\u308b\n</code></pre> <ul> <li>\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b</li> </ul> <pre><code>velocity.output(output_file_name)  # \u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u30c6\u30ad\u30b9\u30c8\u5f62\u5f0f\u3067\u51fa\u529b\u3055\u308c\u308b\uff0c\n</code></pre> <ul> <li>\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u306e\u8a08\u7b97</li> </ul> <pre><code>velocity.response_spectrum()   # \u6210\u5206\u6bce\u306b\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%\uff09\u304c\u8a08\u7b97\u3055\u308c\u308b\nvelocity.plot_rs_all()  # \u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\nvelocity.output_rs(output_rs_file_name) # \u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u51fa\u529b\u3055\u308c\u308b\n</code></pre> <p>\u3053\u306e\u4ed6\u306b\u3082\u8272\u3005\u3042\u308a\u307e\u3059\u304c\uff0c\u7701\u7565\u3057\u307e\u3059</p> <p>Hiroyuki Goto (Kyoto University)</p>"},{"location":"reference/","title":"API Reference","text":""},{"location":"reference/#_1","title":"\u6ce2\u5f62\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f","text":""},{"location":"reference/#PySGM.main","title":"<code>main</code>","text":""},{"location":"reference/#PySGM.main.parse","title":"<code>parse(file_name, file_name2=None, file_name3=None, fmt='vector', gain=None, bit=None, noheader=False)</code>","text":"<p>\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307f\u3001\u9069\u5207\u306a\u5f62\u5f0f\u3067\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002</p> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>file_name</code> <code>str</code> <p>\u8aad\u307f\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9</p> \u5fc5\u9808 <code>file_name2</code> <code>str</code> <p>\u8ffd\u52a0\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\uff08SAC\u5f62\u5f0f\u7528\u306a\u3069\uff09\uff0e\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u306f\u4e0d\u8981</p> <code>None</code> <code>file_name3</code> <code>str</code> <p>\u8ffd\u52a0\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\uff08SAC\u5f62\u5f0f\u7528\u306a\u3069\uff09\uff0e\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u306f\u4e0d\u8981</p> <code>None</code> <code>fmt</code> <code>str</code> <p>\u30c7\u30fc\u30bf\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8 (\"vector\", \"nied\", \"jma\", \"win\", \"gns\", \"sac\")\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306fvecotrs\u5f62\u5f0f\uff08\"vector\"\uff09</p> <code>'vector'</code> <code>gain</code> <code>float</code> <p>\u632f\u5e45\u500d\u7387\uff08win\u5f62\u5f0f\u306e\u307f\uff09</p> <code>None</code> <code>bit</code> <code>int</code> <p>\u30c7\u30fc\u30bf\u30d3\u30c3\u30c8\u6570\uff08win\u5f62\u5f0f\u306e\u307f\uff09</p> <code>None</code> <code>noheader</code> <code>bool</code> <p>\u30d8\u30c3\u30c0\u30fc\u304c\u3042\u308b\u304b\u3069\u3046\u304b\uff08vectors\u5f62\u5f0f\u306e\u307f\uff09</p> <code>False</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>vectors</code> <p>\u8aad\u307f\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u306e vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/main.py</code> <pre><code>def parse(file_name,file_name2=None,file_name3=None,fmt=\"vector\",\n    gain=None,bit=None,noheader=False):\n    \"\"\"\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307f\u3001\u9069\u5207\u306a\u5f62\u5f0f\u3067\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n    Args:\n        file_name (str): \u8aad\u307f\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n        file_name2 (str, optional): \u8ffd\u52a0\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\uff08SAC\u5f62\u5f0f\u7528\u306a\u3069\uff09\uff0e\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u306f\u4e0d\u8981\n        file_name3 (str, optional): \u8ffd\u52a0\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\uff08SAC\u5f62\u5f0f\u7528\u306a\u3069\uff09\uff0e\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u306f\u4e0d\u8981\n        fmt (str, optional): \u30c7\u30fc\u30bf\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8 (\"vector\", \"nied\", \"jma\", \"win\", \"gns\", \"sac\")\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306fvecotrs\u5f62\u5f0f\uff08\"vector\"\uff09\n        gain (float, optional): \u632f\u5e45\u500d\u7387\uff08win\u5f62\u5f0f\u306e\u307f\uff09\n        bit (int, optional): \u30c7\u30fc\u30bf\u30d3\u30c3\u30c8\u6570\uff08win\u5f62\u5f0f\u306e\u307f\uff09\n        noheader (bool, optional): \u30d8\u30c3\u30c0\u30fc\u304c\u3042\u308b\u304b\u3069\u3046\u304b\uff08vectors\u5f62\u5f0f\u306e\u307f\uff09\n\n    Returns:\n        vectors: \u8aad\u307f\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u306e vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n    \"\"\"\n    if fmt == \"vector\":\n        v = vector.parse(file_name,noheader)\n        return v\n\n    elif fmt == \"nied\":\n        file_basename,ext = os.path.splitext(file_name)\n        v = nied.parse(file_basename,ext)\n        return v\n\n    elif fmt == \"jma\":\n        file_basename,ext = os.path.splitext(file_name)\n        if ext == \".csv\":\n            v = jma.csv_parse(file_name)\n        else:\n            v = jma.parse(file_name)\n        return v\n\n    elif fmt == \"win\":\n        v = win.parse(file_name,gain,bit)\n        return v\n\n    elif fmt == \"gns\":\n        v = gns.parse(file_name)\n        return v\n\n    elif fmt == \"sac\":\n        v = sac.parse(file_name,file_name2,file_name3)\n        return v\n</code></pre>"},{"location":"reference/#_2","title":"\u6ce2\u5f62\u89e3\u6790","text":"<p>\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u306f\u3001\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f\u95a2\u6570\u3068\u3001\u6ce2\u5f62\u3092\u6271\u3046\u305f\u3081\u306e\u4e3b\u8981\u30af\u30e9\u30b9\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\uff0e</p>"},{"location":"reference/#functions","title":"Functions (\u95a2\u6570)","text":""},{"location":"reference/#PySGM.vector.parse","title":"<code>parse(input_file, noheader=False)</code>","text":"<pre><code>\u6307\u5b9a\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u30013\u6210\u5206\u4e00\u62ec\u89e3\u6790\u7528\u306e vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\n\n\u3053\u306e\u95a2\u6570\u306f\u5185\u90e8\u3067 vectors.input \u3092\u547c\u3073\u51fa\u3059\uff0e\u4e3b\u306b PySGM \u72ec\u81ea\u306e\u30c6\u30ad\u30b9\u30c8\u5f62\u5f0f\uff08vector\u5f62\u5f0f\uff09\u3092\u8aad\u307f\u8fbc\u3080\u969b\u306b\u4f7f\u7528\u3059\u308b\uff0e\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>input_file</code> <code>str</code> <p>\u8aad\u307f\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9</p> \u5fc5\u9808 <code>noheader</code> <code>bool</code> <p>\u30d5\u30a1\u30a4\u30eb\u306b\u30d8\u30c3\u30c0\u30fc\u884c\u304c\u306a\u3044\u5834\u5408\u306f True \u3092\u6307\u5b9a\u3057\u307e\u3059</p> <code>False</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>vectors</code> <p>\u8aad\u307f\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u3092\u6301\u3064 vectors \u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def parse(input_file,noheader=False):\n    \"\"\"\n        \u6307\u5b9a\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u30013\u6210\u5206\u4e00\u62ec\u89e3\u6790\u7528\u306e vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\n\n        \u3053\u306e\u95a2\u6570\u306f\u5185\u90e8\u3067 vectors.input \u3092\u547c\u3073\u51fa\u3059\uff0e\u4e3b\u306b PySGM \u72ec\u81ea\u306e\u30c6\u30ad\u30b9\u30c8\u5f62\u5f0f\uff08vector\u5f62\u5f0f\uff09\u3092\u8aad\u307f\u8fbc\u3080\u969b\u306b\u4f7f\u7528\u3059\u308b\uff0e\n\n    Args:\n        input_file (str): \u8aad\u307f\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n        noheader (bool): \u30d5\u30a1\u30a4\u30eb\u306b\u30d8\u30c3\u30c0\u30fc\u884c\u304c\u306a\u3044\u5834\u5408\u306f True \u3092\u6307\u5b9a\u3057\u307e\u3059\n\n    Returns:\n        vectors: \u8aad\u307f\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u3092\u6301\u3064 vectors \u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    \"\"\"\n    v = vectors.input(input_file,noheader)\n    return v\n</code></pre>"},{"location":"reference/#classes","title":"Classes (\u30af\u30e9\u30b9)","text":""},{"location":"reference/#PySGM.vector.vector","title":"<code>vector</code>","text":"<pre><code>\u5358\u4e00\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\u3092\u6271\u3046\u57fa\u672c\u30af\u30e9\u30b9\u3002\n</code></pre> <p>\u5c5e\u6027\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>header</code> <code>dict</code> <p>\u89b3\u6e2c\u70b9\u60c5\u5831\u3084\u8a18\u9332\u6642\u9593\u306a\u3069\u3092\u542b\u3080\u30d8\u30c3\u30c0\u30fc</p> <code>tim</code> <code>ndarray</code> <p>\u6642\u9593\u8ef8\u30c7\u30fc\u30bf\uff08\u79d2\uff09</p> <code>wave</code> <code>ndarray</code> <p>\u6ce2\u5f62\u30c7\u30fc\u30bf\uff08\u52a0\u901f\u5ea6\u306a\u3069\uff09</p> <code>dt</code> <code>float</code> <p>\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>class vector:\n    \"\"\"\n        \u5358\u4e00\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\u3092\u6271\u3046\u57fa\u672c\u30af\u30e9\u30b9\u3002\n\n    Attributes:\n        header (dict): \u89b3\u6e2c\u70b9\u60c5\u5831\u3084\u8a18\u9332\u6642\u9593\u306a\u3069\u3092\u542b\u3080\u30d8\u30c3\u30c0\u30fc\n        tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\uff08\u79d2\uff09\n        wave (numpy.ndarray): \u6ce2\u5f62\u30c7\u30fc\u30bf\uff08\u52a0\u901f\u5ea6\u306a\u3069\uff09\n        dt (float): \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09\n    \"\"\"\n    def __init__(self,header,tim,wave):\n        \"\"\"\n            vector \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n\n        Args:\n            header (dict): \u30d8\u30c3\u30c0\u30fc\u60c5\u5831\n            tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\n            wave (numpy.ndarray): \u6ce2\u5f62\u30c7\u30fc\u30bf\n        \"\"\"\n        self.header = header\n        self.tim = tim\n        self.wave = wave\n        self.dt = tim[1] - tim[0]\n\n    def copy(self):\n        v2 = copy.deepcopy(self)\n        return v2\n\n    #----------------------------------------------#\n    #  Wave Analysis\n    #----------------------------------------------#\n    def integration(wave,dt,low,high):\n        \"\"\"\n            \u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u305f\u6570\u5024\u7a4d\u5206\n\n        Args:\n            wave (numpy.ndarray): \u7a4d\u5206\u5bfe\u8c61\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n            dt (float): \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09\n            low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)\n            high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)\n\n        Returns:\n            numpy.ndarray: \u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n        \"\"\"\n        w = np.fft.fft(wave)\n        freq = np.fft.fftfreq(len(wave),d=dt)\n        df = freq[1] - freq[0]\n\n        nt = 10\n        low0  = max(0,low - nt*df)\n        high0 = high + nt*df\n\n        w2 = np.ones_like(w)\n        for (i,f) in enumerate(freq):\n            coef = (0.0+1.0j)*2.0*math.pi*f\n\n            if abs(f) &lt;= low0:\n                w2[i] = 0.0 + 0.0j\n            elif abs(f) &lt; low:\n                w2[i] = w[i] * (abs(f)-low0)/(low-low0) / coef\n            elif abs(f) &lt;= high:\n                w2[i] = w[i] / coef\n            elif abs(f) &lt;= high0:\n                w2[i] = w[i] * (abs(f)-high0)/(high-high0) / coef\n            else:\n                w2[i] = 0.0 + 0.0j\n\n        wave_int = np.real(np.fft.ifft(w2))\n        return wave_int\n\n    def differentiation(wave,dt,low,high):\n        w = np.fft.fft(wave)\n        freq = np.fft.fftfreq(len(wave),d=dt)\n        df = freq[1] - freq[0]\n\n        nt = 10\n        low0  = max(0,low - nt*df)\n        high0 = high + nt*df\n\n        w2 = np.ones_like(w)\n        for (i,f) in enumerate(freq):\n            coef = (0.0+1.0j)*2.0*math.pi*f\n\n            if abs(f) &lt; low0:\n                w2[i] = 0.0 + 0.0j\n            elif abs(f) &lt; low:\n                w2[i] = w[i] * (abs(f)-low0)/(low-low0) * coef\n            elif abs(f) &lt;= high:\n                w2[i] = w[i] * coef\n            elif abs(f) &lt;= high0:\n                w2[i] = w[i] * (abs(f)-high0)/(high-high0) * coef\n            else:\n                w2[i] = 0.0 + 0.0j\n\n        wave_int = np.real(np.fft.ifft(w2))\n        return wave_int\n\n    def bandpass(wave,dt,low,high):\n        w = np.fft.fft(wave)\n        freq = np.fft.fftfreq(len(wave),d=dt)\n        df = freq[1] - freq[0]\n\n        nt = 10\n        low0  = max(0,low - nt*df)\n        high0 = high + nt*df\n\n        w2 = np.ones_like(w)\n        for (i,f) in enumerate(freq):\n            if abs(f) &lt; low0:\n                w2[i] = 0.0 + 0.0j\n            elif abs(f) &lt; low:\n                w2[i] = w[i] * (abs(f)-low0)/(low-low0)\n            elif abs(f) &lt;= high:\n                w2[i] = w[i]\n            elif abs(f) &lt;= high0:\n                w2[i] = w[i] * (abs(f)-high0)/(high-high0)\n            else:\n                w2[i] = 0.0 + 0.0j\n\n        wave_int = np.real(np.fft.ifft(w2))\n        return wave_int\n\n    def bandpass_butter(wave,dt,low,high,order=5):\n        fs = 1.0/dt\n        nyq = 0.5*fs\n        low_cut = low/nyq\n        high_cut = high/nyq\n        b,a = signal.butter(order,[low_cut,high_cut],btype='band')\n        wave2 = signal.lfilter(b,a,wave)\n        return wave2\n\n    def direct_integration(wave,dt):\n        wave_int = wave.cumsum()*dt\n        return wave_int\n\n    # ---------------------------------------------------    \n    def boore_integration(acc,dt,t0):\n        def boore_coeff(vel,n0,n1):\n            ntim = len(vel)\n            x = np.array(range(ntim))\n            a0 = (vel[n0:n1].T @ (x[n0:n1]-n0)) / ((x[n0:n1]-n0).T @ (x[n0:n1]-n0))\n            a1 = ((vel[n1:]-a0*(n1-n0)).T @ (x[n1:]-n1)) / ((x[n1:]-n1).T @ (x[n1:]-n1))\n            return a0, a1\n\n        def boore_residual(vel,n0,n1,a0,a1):\n            x = range(len(vel))\n            res = np.sum(vel[0:n0]**2)\n            res += np.sum((vel[n0:n1] - a0*(range(n1-n0)))**2)\n            res += np.sum((vel[n1:] - (a1*(range(len(vel)-n1)) + a0*(n1-n0)))**2)\n            return res\n\n        vel = vector.direct_integration(acc,dt)\n        ntim = len(vel)\n        n0_ini = int(t0/dt)\n\n        for n0 in range(n0_ini,n0_ini+6000,100):\n            for n in range(100,3000,10):\n                n1 = n0 + n\n                a0,a1 = boore_coeff(vel,n0,n1)\n                res = boore_residual(vel,n0,n1,a0,a1)\n\n                if ('res_min' not in locals()) or (res &lt; res_min):\n                    print(n0,n1,res)\n                    res_min = res\n                    n0_min = n0\n                    n1_min = n1\n\n        a0,a1 = boore_coeff(vel,n0_min,n1_min)\n        x = np.array(range(ntim))\n        y0 = a0*(x[n0_min:n1_min]-n0_min)\n        y1 = a1*(x[n1_min:]-n1_min) + a0*(n1_min-n0_min)\n\n        vel[n0_min:n1_min] -= y0\n        vel[n1_min:] -= y1\n        disp = vector.direct_integration(vel,dt)\n\n        return disp\n\n    # ---------------------------------------------------    \n    def envelope_vector(wave):\n        wave_ana = signal.hilbert(wave)\n        wave_env = np.abs(wave_ana)\n        return wave_env\n\n    def envelope(self):\n        v2 = copy.deepcopy(self)\n        wave_ana = signal.hilbert(self.wave)\n        v2.wave = np.abs(wave_ana)\n        return v2\n\n    def power_spectrum(wave,fs):\n        freq, P = signal.periodogram(wave,fs)\n        return freq, P\n\n    def fourier_spectrum(wave,fs):\n        def set_parameters(wave,dt):\n            n = len(wave) / 2\n            ntw = 2\n            while ntw &lt; n:\n                ntw = ntw*2\n            freq = abs(np.fft.fftfreq(ntw,d=dt))\n            return freq, ntw\n\n        dt = 1.0/float(fs)\n        freq, ntw = set_parameters(wave,dt)\n        w = np.fft.fft(wave[0:ntw])\n\n        return freq, w\n\n    def peak_ground(wave,print_result=True):\n        PG = math.sqrt(np.max(wave**2))\n\n        if print_result:\n            print(\"PGX: \",PG)\n\n        return PG\n\n    def normalize(wave,scale=1.0):\n        PG = math.sqrt(np.max(wave**2))\n        return wave/PG*scale\n\n    def roll(self,shift):\n        nshift = int(shift/self.dt)\n        v2 = copy.deepcopy(self)\n        v2.wave = np.roll(self.wave,nshift)\n        return v2\n\n    def amplify(self,amp):\n        v2 = copy.deepcopy(self)\n        v2.wave = self.wave*amp\n        return v2\n\n    def sum(self,v1):\n        v2 = copy.deepcopy(self)\n        v2.wave += v1.wave\n        return v2\n\n    def extract(self,start,end):\n        ns = int(start/self.dt)\n        ne = int(end/self.dt)\n        ntim = ne-ns\n        v2 = copy.deepcopy(self)\n        v2.wave = self.wave[ns:ne]\n        v2.tim = self.tim[ns:ne]\n        v2.header['ntim'] = ntim\n        return v2\n\n    #----------------------------------------------#\n    def coherence(self,wave,window):\n        freq,f0 = vector.fourier_spectrum(self.wave,1/self.dt)\n        freq,f1 = vector.fourier_spectrum(wave.wave,1/self.dt)\n\n        p0 = np.conjugate(f0)*f0\n        p1 = np.conjugate(f1)*f1\n        c01 = np.conjugate(f0)*f1\n\n        nw = int(window/(freq[1]-freq[0]))\n        if nw%2 == 0:\n            nw += 1\n        nw2 = int((nw-1)/2)\n        w = signal.parzen(nw)\n\n        a = np.r_[c01[nw2:0:-1],c01,c01[0],c01[-1:-nw2:-1]]\n        c01_s = np.convolve(w/w.sum(),a,mode='valid')\n\n        a = np.r_[p0[nw2:0:-1],p0,p0[0],p0[-1:-nw2:-1]]\n        p0_s = np.convolve(w/w.sum(),a,mode='valid')\n        a = np.r_[p1[nw2:0:-1],p1,p1[0],p1[-1:-nw2:-1]]\n        p1_s = np.convolve(w/w.sum(),a,mode='valid')\n\n        c01_abs = np.conjugate(c01_s)*c01_s\n\n        return freq, c01_abs/(p0_s*p1_s)\n\n    #----------------------------------------------#\n    #  Residual functions\n    #----------------------------------------------#\n    def nonlinear_residual(self,v):\n        v0 = np.sum(self.wave**2)\n        v1 = np.sum(v.wave**2)\n        v01 = np.sum((self.wave-v.wave)**2)\n        return v01*v01/v0/v1\n\n    def linear_residual(self,v):\n        v0 = np.sum(self.wave**2)\n        v01 = np.sum((self.wave-v.wave)**2)\n        return v01/v0\n\n    #----------------------------------------------#\n    #  Plot functions\n    #----------------------------------------------#\n    def plot(self):\n\n        start = self.tim[0]\n        end = self.tim[-1]\n\n        ns = int(start/self.dt)\n        ne = int(end/self.dt)\n\n        fig = plt.figure()\n\n        plt.rcParams['xtick.direction'] = 'in'\n        plt.rcParams['ytick.direction'] = 'in'\n\n        ax1 = fig.add_subplot(111)\n\n        if 'code' in self.header and 'record_time' in self.header:\n            ax1.set_title(self.header['code']+\" \"+self.header['record_time'])\n\n        ax1.plot(self.tim,self.wave,color='k',lw=1)\n\n        amax = np.amax(np.abs(self.wave[ns:ne]))\n\n        ax1.set_xlim(start,end)\n        ax1.set_ylim(-1.2*amax,1.2*amax)\n        ax1.set_xlabel(\"time [s]\")\n\n        plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=0, hspace=0)\n        plt.show()\n\n    def plot_with(self,v):\n        start = self.tim[0]\n        end = min(self.tim[-1],v.tim[-1])\n\n        ns = 0\n        ne = int((end-start)/self.dt)\n\n        fig = plt.figure()\n\n        plt.rcParams['xtick.direction'] = 'in'\n        plt.rcParams['ytick.direction'] = 'in'\n\n        ax1 = fig.add_subplot(211)\n        ax2 = fig.add_subplot(212)\n\n        if 'code' in self.header and 'record_time' in self.header:\n            ax1.set_title(self.header['code']+\" \"+self.header['record_time'])\n\n        ax1.plot(self.tim,self.wave,color='b',lw=1)\n        ax2.plot(v.tim,v.wave,color='k',lw=1)\n\n        amax = np.amax(np.abs(self.wave[ns:ne]))\n\n        ax1.set_xlim(start,end)\n        ax2.set_xlim(start,end)\n\n        ax1.set_ylim(-1.2*amax,1.2*amax)\n        ax2.set_ylim(-1.2*amax,1.2*amax)\n\n        ax2.set_xlabel(\"time [s]\")\n\n        plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=0, hspace=0)\n        plt.show()\n</code></pre>"},{"location":"reference/#PySGM.vector.vector.__init__","title":"<code>__init__(header, tim, wave)</code>","text":"<pre><code>vector \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>header</code> <code>dict</code> <p>\u30d8\u30c3\u30c0\u30fc\u60c5\u5831</p> \u5fc5\u9808 <code>tim</code> <code>ndarray</code> <p>\u6642\u9593\u8ef8\u30c7\u30fc\u30bf</p> \u5fc5\u9808 <code>wave</code> <code>ndarray</code> <p>\u6ce2\u5f62\u30c7\u30fc\u30bf</p> \u5fc5\u9808 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def __init__(self,header,tim,wave):\n    \"\"\"\n        vector \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n\n    Args:\n        header (dict): \u30d8\u30c3\u30c0\u30fc\u60c5\u5831\n        tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\n        wave (numpy.ndarray): \u6ce2\u5f62\u30c7\u30fc\u30bf\n    \"\"\"\n    self.header = header\n    self.tim = tim\n    self.wave = wave\n    self.dt = tim[1] - tim[0]\n</code></pre>"},{"location":"reference/#PySGM.vector.vector.integration","title":"<code>integration(wave, dt, low, high)</code>","text":"<pre><code>\u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u305f\u6570\u5024\u7a4d\u5206\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>wave</code> <code>ndarray</code> <p>\u7a4d\u5206\u5bfe\u8c61\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf</p> \u5fc5\u9808 <code>dt</code> <code>float</code> <p>\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09</p> \u5fc5\u9808 <code>low</code> <code>float</code> <p>\u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)</p> \u5fc5\u9808 <code>high</code> <code>float</code> <p>\u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)</p> \u5fc5\u9808 <p>\u623b\u308a\u5024\uff1a</p> \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <p>numpy.ndarray: \u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def integration(wave,dt,low,high):\n    \"\"\"\n        \u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u305f\u6570\u5024\u7a4d\u5206\n\n    Args:\n        wave (numpy.ndarray): \u7a4d\u5206\u5bfe\u8c61\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n        dt (float): \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09\n        low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)\n        high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570(Hz)\n\n    Returns:\n        numpy.ndarray: \u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n    \"\"\"\n    w = np.fft.fft(wave)\n    freq = np.fft.fftfreq(len(wave),d=dt)\n    df = freq[1] - freq[0]\n\n    nt = 10\n    low0  = max(0,low - nt*df)\n    high0 = high + nt*df\n\n    w2 = np.ones_like(w)\n    for (i,f) in enumerate(freq):\n        coef = (0.0+1.0j)*2.0*math.pi*f\n\n        if abs(f) &lt;= low0:\n            w2[i] = 0.0 + 0.0j\n        elif abs(f) &lt; low:\n            w2[i] = w[i] * (abs(f)-low0)/(low-low0) / coef\n        elif abs(f) &lt;= high:\n            w2[i] = w[i] / coef\n        elif abs(f) &lt;= high0:\n            w2[i] = w[i] * (abs(f)-high0)/(high-high0) / coef\n        else:\n            w2[i] = 0.0 + 0.0j\n\n    wave_int = np.real(np.fft.ifft(w2))\n    return wave_int\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors","title":"<code>vectors</code>","text":"<p>               Bases: <code>vector</code></p> <pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u3057\u3066\u7ba1\u7406\u30fb\u89e3\u6790\u3059\u308b\u305f\u3081\u306e\u30af\u30e9\u30b9\n</code></pre> <p>\u5c5e\u6027\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>header</code> <code>dict</code> <p>\u89b3\u6e2c\u70b9\u60c5\u5831\u3084\u8a18\u9332\u6642\u9593\u306a\u3069\u3092\u542b\u3080\u30d8\u30c3\u30c0\u30fc</p> <code>tim</code> <code>ndarray</code> <p>\u6642\u9593\u8ef8\u30c7\u30fc\u30bf\uff08\u79d2\uff09</p> <code>ew</code> <code>ndarray</code> <p>EW\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf</p> <code>ns</code> <code>ndarray</code> <p>NS\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf</p> <code>ud</code> <code>ndarray</code> <p>UD\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf</p> <code>dt</code> <code>float</code> <p>\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>class vectors(vector):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u5f37\u9707\u52d5\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u3057\u3066\u7ba1\u7406\u30fb\u89e3\u6790\u3059\u308b\u305f\u3081\u306e\u30af\u30e9\u30b9\n\n    Attributes:\n        header (dict): \u89b3\u6e2c\u70b9\u60c5\u5831\u3084\u8a18\u9332\u6642\u9593\u306a\u3069\u3092\u542b\u3080\u30d8\u30c3\u30c0\u30fc\n        tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\uff08\u79d2\uff09\n        ew (numpy.ndarray): EW\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n        ns (numpy.ndarray): NS\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n        ud (numpy.ndarray): UD\u6210\u5206\u306e\u6ce2\u5f62\u30c7\u30fc\u30bf\n        dt (float): \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u9593\u9694\uff08\u79d2\uff09\n    \"\"\"\n    def __init__(self,header,tim,ew,ns,ud):\n        \"\"\"vectors \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n\n        Args:\n            header (dict): \u30d8\u30c3\u30c0\u30fc\u60c5\u5831\n            tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\n            ew (numpy.ndarray): EW\u6210\u5206\u306e\u30c7\u30fc\u30bf\n            ns (numpy.ndarray): NS\u6210\u5206\u306e\u30c7\u30fc\u30bf\n            ud (numpy.ndarray): UD\u6210\u5206\u306e\u30c7\u30fc\u30bf\n        \"\"\"\n        self.header = header\n        self.tim = tim\n        self.ew = ew\n        self.ns = ns\n        self.ud = ud\n        self.dt = tim[1] - tim[0]\n\n    def copy(self):\n        v2 = copy.deepcopy(self)\n        return v2\n\n    #----------------------------------------------#\n    #  Construction functions\n    #----------------------------------------------#\n    def append(self,v):\n        \"\"\"vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f8c\u308d\u306b\u7e4b\u3052\u308b\n\n        Args:\n            v (vectors): \u5f8c\u308d\u306b\u8ffd\u52a0\u3059\u308b vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n        Returns:\n            vectors: \u5f8c\u308d\u306bv\u304c\u8ffd\u52a0\u3055\u308c\u305f\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n        \"\"\"\n        v2 = self\n        v2.header = self.header\n        v2.ew = np.hstack((self.ew,v.ew))\n        v2.ns = np.hstack((self.ns,v.ns))\n        v2.ud = np.hstack((self.ud,v.ud))\n\n        dt = self.tim[1] - self.tim[0]\n        shift = np.full_like(v.tim,self.tim[-1]+dt)\n        tim = v.tim + shift\n\n        v2.tim = np.hstack((self.tim,tim))\n        v2.header['ntim'] = len(v2.tim)\n\n        return v2\n\n    def to_vector(self,comp):\n        if comp == \"ew\":\n            v = vector(self.header,self.tim,self.ew)\n        elif comp == \"ns\":\n            v = vector(self.header,self.tim,self.ns)\n        elif comp == \"ud\":\n            v = vector(self.header,self.tim,self.ud)\n        return v\n\n    #----------------------------------------------#\n    #  Correction functions\n    #----------------------------------------------#\n    def trend_removal(self,sec=None):\n        \"\"\"\n            3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u7dda\u5f62\u30c8\u30ec\u30f3\u30c9\u306e\u9664\u53bb\uff08\u57fa\u7dda\u88dc\u6b63\uff09\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n\n        Args:\n            \u306a\u3057\n\n        Returns:\n            \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u88dc\u6b63\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n        \"\"\"\n\n        if sec is None:\n            self.ew = self.ew - np.average(self.ew)\n            self.ns = self.ns - np.average(self.ns)\n            self.ud = self.ud - np.average(self.ud)\n        else:\n            n = int(sec/self.dt)\n            self.ew = self.ew - np.average(self.ew[:n])\n            self.ns = self.ns - np.average(self.ns[:n])\n            self.ud = self.ud - np.average(self.ud[:n])\n\n    def rotation(self,rot,deg='deg'):\n        \"\"\"\n            \u6c34\u5e732\u6210\u5206\uff08EW, NS\uff09\u3092\u6307\u5b9a\u3057\u305f\u89d2\u5ea6\u3060\u3051\u56de\u8ee2\u3055\u305b\u308b\n\n        Args:\n            rot (float): \u56de\u8ee2\u89d2\n            deg (str): \u89d2\u5ea6\u306e\u5358\u4f4d\u3002'deg'\uff08\u5ea6\uff09\u307e\u305f\u306f 'rad'\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n\n        Returns:\n            vectors: \u56de\u8ee2\u5f8c\u306e\u6210\u5206\u3092\u6301\u3064\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n        \"\"\"\n        if deg == 'deg':\n            rad = rot/180.0 * math.pi\n        else:\n            rad = rot\n\n        p = self.ew * math.sin(rad) + self.ns * math.cos(rad)\n        n = self.ew * math.cos(rad) - self.ns * math.sin(rad)\n\n        v2 = copy.deepcopy(self)\n        v2.ew = n\n        v2.ns = p\n\n        return v2\n\n    def zero_padding(self,ntim):\n        self.trend_removal()\n        ntim0 = len(self.tim)\n\n        if ntim0 &lt; ntim:\n            zero = np.zeros(ntim-ntim0,dtype=float)\n\n            v2 = self\n            v2.header = self.header\n            v2.ew = np.hstack((self.ew,zero))\n            v2.ns = np.hstack((self.ns,zero))\n            v2.ud = np.hstack((self.ud,zero))\n\n            dt = self.tim[1] - self.tim[0]\n            v2.tim = np.linspace(0,ntim*dt,ntim,endpoint=False)\n            v2.header['ntim'] = len(v2.tim)\n\n        else:\n            v2 = copy.deepcopy(self)\n\n        return v2\n\n    def time_shift(self,shift):\n        nshift = int(shift/self.dt)\n        v2 = copy.deepcopy(self)\n        v2.ew = np.roll(self.ew,-nshift)\n        v2.ns = np.roll(self.ns,-nshift)\n        v2.ud = np.roll(self.ud,-nshift)\n        return v2\n\n    def normalize(self,scale=1.0):\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.normalize(self.ew,scale)\n        v2.ns = vector.normalize(self.ns,scale)\n        v2.ud = vector.normalize(self.ud,scale)\n        return v2\n\n    def level_shift(self,level):\n        v2 = copy.deepcopy(self)\n        v2.ew = self.ew + level\n        v2.ns = self.ns + level\n        v2.ud = self.ud + level\n        return v2\n\n    def trim(self,ntim):\n        v2 = copy.deepcopy(self)\n        v2.ew = self.ew[0:ntim]\n        v2.ns = self.ns[0:ntim]\n        v2.ud = self.ud[0:ntim]\n        v2.tim = self.tim[0:ntim]\n        v2.header['ntim'] = ntim\n\n        return v2\n\n    def adjust(self,v):\n        ntim = v.header['ntim']\n\n        if self.header['ntim'] &gt; ntim:\n            v2 = self.trim(ntim)\n        else:\n            v2 = self.zero_padding(ntim)\n\n        return v2\n\n    def every(self,n):\n        v2 = copy.deepcopy(self)\n        v2.ew = self.ew[0::n]\n        v2.ns = self.ns[0::n]\n        v2.ud = self.ud[0::n]\n        v2.tim = self.tim[0::n]\n        v2.dt = v2.tim[1] - v2.tim[0]\n\n        return v2\n\n    def resampling(self,fs):\n        f = int(1.0/self.dt)\n        if f &gt; fs:\n            n = int(f/fs)\n            v2 = self.every(n)\n        else:\n            v2 = self\n\n        return v2\n\n    def amplify(self,amp):\n        v2 = copy.deepcopy(self)\n        v2.ew = self.ew*amp\n        v2.ns = self.ns*amp\n        v2.ud = self.ud*amp\n        return v2\n\n    def extract(self,start,end=60,to_end=True):\n        ns = int(start/self.dt)\n        if to_end:\n            ne = self.header['ntim']\n        else:\n            ne = int(end/self.dt)\n        ntim = ne-ns\n\n        v2 = copy.deepcopy(self)\n        v2.ew = self.ew[ns:ne]\n        v2.ns = self.ns[ns:ne]\n        v2.ud = self.ud[ns:ne]\n        v2.tim = self.tim[ns:ne]\n        v2.header['ntim'] = ntim\n        return v2\n\n    def reset_tim(self):\n        t0 = self.tim[0]\n        self.tim = self.tim - t0\n        self.header['ntim'] = len(self.tim)\n\n    #----------------------------------------------#\n    def set_origin_time(self,origin_time_str):\n        origin_time = datetime.datetime.strptime(origin_time_str,\"%Y/%m/%d %H:%M:%S\")\n        record_time = datetime.datetime.strptime(self.header['record_time'],\"%Y/%m/%d %H:%M:%S\")\n        dt = record_time - origin_time\n        self.tim = self.tim + dt.total_seconds()\n\n    #----------------------------------------------#\n    #  Wave Analysis\n    #----------------------------------------------#\n    def integration(self,low=0.2,high=50):\n        \"\"\"\n            3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u3066\u6570\u5024\u7a4d\u5206\u3059\u308b\uff0e\u6307\u5b9a\u3057\u305f\u5468\u6ce2\u6570\u5e2f\u57df\uff08low - high\uff09\u4ee5\u5916\u306f\u30ab\u30c3\u30c8\u3055\u308c\u308b\uff0e\n\n        Args:\n            low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 0.2\n            high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\n\n        Returns:\n            \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e self.ew, self.ns, self.ud \u304c\u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n        \"\"\"\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.integration(self.ew,self.dt,low,high)\n        v2.ns = vector.integration(self.ns,self.dt,low,high)\n        v2.ud = vector.integration(self.ud,self.dt,low,high)\n\n        return v2\n\n    def differentiation(self,low=0.05,high=50):\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.differentiation(self.ew,self.dt,low,high)\n        v2.ns = vector.differentiation(self.ns,self.dt,low,high)\n        v2.ud = vector.differentiation(self.ud,self.dt,low,high)\n\n        return v2\n\n    def bandpass(self,low=0.05,high=10):\n        \"\"\"\n            3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d0\u30f3\u30c9\u30d1\u30b9\u30d5\u30a3\u30eb\u30bf\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n\n        Args:\n            low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\n            high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\n\n        Returns:\n            \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u30d5\u30a3\u30eb\u30bf\u9069\u7528\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n        \"\"\"\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.bandpass(self.ew,self.dt,low,high)\n        v2.ns = vector.bandpass(self.ns,self.dt,low,high)\n        v2.ud = vector.bandpass(self.ud,self.dt,low,high)\n\n        return v2\n\n    def bandpass_butter(self,low=0.05,high=10,order=5):\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.bandpass_butter(self.ew,self.dt,low,high,order)\n        v2.ns = vector.bandpass_butter(self.ns,self.dt,low,high,order)\n        v2.ud = vector.bandpass_butter(self.ud,self.dt,low,high,order)\n        return v2\n\n    def direct_integration(self):\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.direct_integration(self.ew,self.dt)\n        v2.ns = vector.direct_integration(self.ns,self.dt)\n        v2.ud = vector.direct_integration(self.ud,self.dt)\n        return v2\n\n    def boore_integration(self,t0=15.0):\n        v2 = copy.deepcopy(self)\n        v2.trend_removal(sec=t0)\n        v2.ew = vector.boore_integration(self.ew,self.dt,t0)\n        v2.ns = vector.boore_integration(self.ns,self.dt,t0)\n        v2.ud = vector.boore_integration(self.ud,self.dt,t0)\n        return v2\n\n    def envelope(self):\n        v2 = copy.deepcopy(self)\n        v2.ew = vector.envelope_vector(self.ew)\n        v2.ns = vector.envelope_vector(self.ns)\n        v2.ud = vector.envelope_vector(self.ud)\n        return v2\n\n    def power_spectrum(self):\n        fs = 1.0/self.dt\n        freq, Pew = vector.power_spectrum(self.ew,fs)\n        freq, Pns = vector.power_spectrum(self.ns,fs)\n        freq, Pud = vector.power_spectrum(self.ud,fs)\n\n        self.ps = spectrum.spectrum(self.header,freq,Pew,Pns,Pud)\n        return self.ps\n\n    def fourier_spectrum(self):\n        fs = 1.0/self.dt\n        freq, Few = vector.fourier_spectrum(self.ew,fs)\n        freq, Fns = vector.fourier_spectrum(self.ns,fs)\n        freq, Fud = vector.fourier_spectrum(self.ud,fs)\n\n        self.fs = spectrum.spectrum(self.header,freq,Few,Fns,Fud)\n        return self.fs\n\n    def fourier_amp_spectrum(self):\n        fs = 1.0/self.dt\n        freq, Few = vector.fourier_spectrum(self.ew,fs)\n        freq, Fns = vector.fourier_spectrum(self.ns,fs)\n        freq, Fud = vector.fourier_spectrum(self.ud,fs)\n\n        self.fs = spectrum.spectrum(self.header,freq,np.abs(Few),np.abs(Fns),np.abs(Fud))\n        return self.fs\n\n    def spectrum_ratio(self,ps0):\n        fs = 1.0/self.dt\n        freq, Pew = vector.power_spectrum(self.ew,fs)\n        freq, Pns = vector.power_spectrum(self.ns,fs)\n        freq, Pud = vector.power_spectrum(self.ud,fs)\n\n        nf = min(len(freq),len(ps0.freq))\n\n        sr_ew = np.sqrt(Pew[0:nf] / ps0.ew[0:nf])\n        sr_ns = np.sqrt(Pns[0:nf] / ps0.ns[0:nf])\n        sr_ud = np.sqrt(Pud[0:nf] / ps0.ud[0:nf])\n\n        sr = spectrum.spectrum(self.header,freq,sr_ew,sr_ns,sr_ud)\n        return sr\n\n    def response_spectrum(self):\n        self.period = np.logspace(-1,1,100)\n\n        self.Sa_ew, self.Sv_ew, self.Sd_ew = response.response_spectrum(self.ew,self.period,self.dt)\n        self.Sa_ns, self.Sv_ns, self.Sd_ns = response.response_spectrum(self.ns,self.period,self.dt)\n        self.Sa_ud, self.Sv_ud, self.Sd_ud = response.response_spectrum(self.ud,self.period,self.dt)\n\n    def response_spectrum_max(self):\n        \"\"\"\n            \u6c34\u5e73\u6210\u5206\u306e\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u3092RotD100\u3067\u7b97\u51fa\u3059\u308b\uff0e\u5b9f\u884c\u3059\u308b\u3068vectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u4ee5\u4e0b\u306eAttributes\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n\n        Returns:\n            None: \u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u5024\u3092\u8fd4\u3055\u306a\u3044\uff0e\u4ee3\u308f\u308a\u306b\u4ee5\u4e0b\u306e\u5c5e\u6027\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n                - **Sa**: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n                - **Sv**: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n                - **Sd**: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n                - **Sa_rot**: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n                - **Sv_rot**: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n                - **Sd_rot**: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n        \"\"\"\n        self.period = np.logspace(-1,1,100)\n\n        self.Sa, self.Sv, self.Sd, self.Sa_rot, self.Sv_rot, self.Sd_rot = response.response_spectrum_max(self.ew,self.ns,self.period,self.dt)\n\n    def response_spectrum_peak_period(self):\n        self.period = np.logspace(-1,1,100)\n        pSv,peak_pSv,peak_period = response.response_spectrum_pseudo_FD(self.ew,self.ns,self.period,self.dt)\n\n        return peak_pSv, peak_period\n\n    def response_spectrum_peak_period_psv(self):\n        self.period = np.logspace(-1,1,100)\n        pSv,peak_pSv,peak_period = response.response_spectrum_pseudo(self.ew,self.ns,self.period,self.dt)\n\n        return peak_pSv, peak_period\n\n    def calc_SI(self):\n        SI = response.calc_SI_FD(self.ew,self.ns,self.dt)\n        return SI\n\n    def peak_ground_3d(self,print_result=True):\n        \"\"\"\n            3\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n\n        Args:\n            print_result (bool): \u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\n        Returns:\n            float: \u6700\u5927\u5024\n        \"\"\"\n        PG = math.sqrt(np.max(self.ew**2 + self.ns**2 + self.ud**2))\n\n        if print_result:\n            print(\"PGX (3d): \",PG)\n\n        return PG\n\n    def peak_ground_2d(self,print_result=True):\n        \"\"\"\n            \u6c34\u5e732\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n\n        Args:\n            print_result (bool): \u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\n        Returns:\n            float: \u6700\u5927\u5024\n        \"\"\"\n        PG = math.sqrt(np.max(self.ew**2 + self.ns**2))\n\n        if print_result:\n            print(\"PGX (2d): \",PG)\n\n        return PG\n\n    def peak_ground_all(self,print_result=True):\n        PG_ew = math.sqrt(np.max(self.ew**2))\n        PG_ns = math.sqrt(np.max(self.ns**2))\n        PG_ud = math.sqrt(np.max(self.ud**2))\n\n        if print_result:\n            print(\"PGX (ew): \",PG_ew)\n            print(\"PGX (ns): \",PG_ns)\n            print(\"PGX (ud): \",PG_ud)\n\n        return PG_ew, PG_ns, PG_ud\n\n    def jma_seismic_intensity(self,print_result=True):\n        \"\"\"\n            \u6c17\u8c61\u5e81\u8a08\u6e2c\u9707\u5ea6\u3092\u8a08\u7b97\n\n        Args:\n            print_result (bool,optional): \u7d50\u679c\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue\n\n        Returns:\n            float: \u8a08\u7b97\u3055\u308c\u305f\u8a08\u6e2c\u9707\u5ea6\u5024\n        \"\"\"\n        si = jsi.jsi(self.ew,self.ns,self.ud,self.dt)\n\n        if print_result:\n            print(\"JMA Seismic Intensity: \", si)\n\n        return si\n\n    def GM2025_modified_intensity(self,k=0.4,print_result=True):\n        si = jsi.GM2025(self.ew,self.ns,self.ud,self.dt,k)\n\n        if print_result:\n            print(\"GM2025 Intensity: \", si)\n\n        return si\n\n    def realtime_seismic_intensity(self):\n        rsi = realtime_jsi.realtime_jsi(self.ew,self.ns,self.ud,self.dt)\n        return rsi\n\n    def peak_period_Sv(self):\n        self.period = np.logspace(-1,1,100)\n        peak_Sv,peak_period = response.response_spectrum_peak_period_sv(self.ew,self.ns,self.period,self.dt)\n\n        return peak_Sv, peak_period\n\n    def demand_curve(self,ductility=4.0):\n        self.period = np.logspace(-1,np.log10(5.0),25)\n\n        self.Dc_ew = demand_curve.demand_curve(self.ew,self.period,ductility,self.dt)\n        self.Dc_ns = demand_curve.demand_curve(self.ns,self.period,ductility,self.dt)\n\n    def cumulative_square(self):\n        return np.sum(self.ns**2 + self.ew**2) * self.dt\n\n    def hv_spectrum(self,nt=4096,start=60,ncut=10,window=0.2):\n\n        fsample = 1.0/self.dt\n        nseg = int(((len(self.tim) - 30) - start)/(nt/2))\n\n        index = start\n        for i in range(0,nseg):\n            ew = self.ew[index:index+nt]\n            ns = self.ns[index:index+nt]\n            ud = self.ud[index:index+nt]\n            rms = math.sqrt(np.var(ew) + np.var(ns) + np.var(ud))\n\n            try:\n                rms_list += [rms]\n                index_list += [index]\n            except:\n                rms_list = [rms]\n                index_list = [index]\n\n            index += int(nt/2)\n\n        r = np.array(rms_list)\n        sorted_index = np.argsort(r)\n\n        for i in sorted_index[0:10]:\n            index = index_list[i]\n\n            ew = self.ew[index:index+nt]\n            ns = self.ns[index:index+nt]\n            ud = self.ud[index:index+nt]\n\n            ew -= np.average(ew)\n            ns -= np.average(ns)\n            ud -= np.average(ud)\n\n            freq, Few = vector.fourier_spectrum(ew,fsample)\n            freq, Fns = vector.fourier_spectrum(ns,fsample)\n            freq, Fud = vector.fourier_spectrum(ud,fsample)\n\n            fs = spectrum.spectrum(self.header,freq,Few,Fns,Fud)\n            fs_smooth = fs.smoothing(window)\n\n            try:\n                fs_list.append(fs_smooth)\n            except:\n                fs_list = spectrum.spectrum_list(fs_smooth)\n\n        fs_list.average(window)\n\n        hv_list = []\n        for s in fs_list.sr:\n            hv_tmp = np.sqrt(np.abs(s.ew)**2 + np.abs(s.ns)**2) / np.abs(s.ud)\n            hv_list += [hv_tmp]\n\n        hv = np.sqrt(fs_list.ave.ew**2 + fs_list.ave.ns**2) / fs_list.ave.ud\n\n        return fs_list.freq, hv, hv_list\n\n    #----------------------------------------------#\n    #  I/O functions\n    #----------------------------------------------#\n    def input(input_file,noheader=False):\n        with open(input_file,'r') as file:\n            lines = list(file)\n\n        if noheader:\n            header = \"\"\n            tim,ew,ns,ud = np.loadtxt(lines[0:], usecols=(0,1,2,3), unpack=True)\n        else:\n            h = lines[0].strip('#').rstrip()\n            header = eval(h)\n            tim,ew,ns,ud = np.loadtxt(lines[1:], usecols=(0,1,2,3), unpack=True)\n\n        v = vectors(header,tim,ew,ns,ud)\n        return v\n\n    def input_pickle(input_file):\n        with open(input_file,'rb') as f:\n            v = pickle.load(f)\n        return v\n\n    #----------------------------------------------#\n    def output(self,output_file,fmt=\"%15.7f\"):\n        \"\"\"\n            3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\u3059\u308b\n\n        Args:\n            output_ffile (str): \u51fa\u529b\u5148\u30d5\u30a1\u30a4\u30eb\u540d\n            fmt (str): \u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n        \"\"\"\n        header = str(self.header)\n        output = np.c_[self.tim,self.ew,self.ns,self.ud]\n        np.savetxt(output_file,output,fmt=fmt,header=header,comments=\"#\")\n\n    def output_csv(self,output_file,fmt=\"%15.7f\"):\n        header = [\"{}: {}\".format(key,self.header[key]) for key in self.header.keys()]\n        output = np.c_[self.tim,self.ew,self.ns,self.ud]\n        with open(output_file,'w') as f:\n            writer = csv.writer(f)\n            writer.writerow(header)\n            writer.writerow([\"tim\",\"ew\",\"ns\",\"ud\"])\n            writer.writerows(output)\n\n    def output_pickle(self,output_file):\n        with open(output_file,'wb') as f:\n            pickle.dump(self,f)\n\n    def output_rs(self,output_file,fmt=\"%15.7f\"):\n        header = str(self.header)\n\n        output = np.c_[self.period,self.Sa_ew,self.Sa_ns,self.Sa_ud]\n        np.savetxt(output_file+\".sa\",output,fmt=fmt,header=header,comments=\"#\")\n\n        output = np.c_[self.period,self.Sv_ew,self.Sv_ns,self.Sv_ud]\n        np.savetxt(output_file+\".sv\",output,fmt=fmt,header=header,comments=\"#\")\n\n        output = np.c_[self.period,self.Sd_ew,self.Sd_ns,self.Sd_ud]\n        np.savetxt(output_file+\".sd\",output,fmt=fmt,header=header,comments=\"#\")\n\n    def output_rs_max(self,output_file,fmt=\"%15.7f\"):\n        header = str(self.header)\n\n        output = np.c_[self.period,self.Sa,self.Sa_rot]\n        np.savetxt(output_file+\".samax\",output,fmt=fmt,header=header,comments=\"#\")\n\n        output = np.c_[self.period,self.Sv,self.Sv_rot]\n        np.savetxt(output_file+\".svmax\",output,fmt=fmt,header=header,comments=\"#\")\n\n        output = np.c_[self.period,self.Sd,self.Sd_rot]\n        np.savetxt(output_file+\".sdmax\",output,fmt=fmt,header=header,comments=\"#\")\n\n\n    def output_ps(self,output_file,fmt=\"%15.7f\"):\n        self.ps.output(output_file,fmt=fmt)\n\n\n    def output_dc(self,output_file,fmt=\"%15.7f\"):\n        header = str(self.header)\n\n        output = np.c_[self.period,self.Dc_ew,self.Dc_ns]\n        np.savetxt(output_file+\".dc\",output,fmt=fmt,header=header,comments=\"#\")\n\n    #----------------------------------------------#\n    #  Plot functions\n    #----------------------------------------------#\n    def plot_all(self,start=0,end=60,to_end=False,output_file=None):\n        \"\"\"\n            3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u4e00\u62ec\u3057\u3066\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\n\n        Args:\n            start (float): \u8868\u793a\u306e\u958b\u59cb\u6642\u523b\uff08\u79d2\uff09\n            end (float): \u8868\u793a\u306e\u7d42\u4e86\u6642\u523b\uff08\u79d2\uff09\n            to_end (bool): \u6ce2\u5f62\u30c7\u30fc\u30bf\u306e\u6700\u5f8c\u307e\u3067\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue\n            output_file (str): \u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306b\u753b\u50cf\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u5834\u5408\u306f\uff0c\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\uff0e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u62e1\u5f35\u5b50\u306b\u5fdc\u3058\u305f\u5f62\u5f0f\u3067\u4fdd\u5b58\u3055\u308c\u308b\uff0e\n        \"\"\"\n        if to_end:\n            start = self.tim[0]\n            end = self.tim[-1]\n            amax = np.amax(np.r_[np.abs(self.ew),np.abs(self.ns),np.abs(self.ud)])\n        else:\n            ns = int(start/self.dt)\n            ne = int(end/self.dt)\n            amax = np.amax(np.r_[np.abs(self.ew[ns:ne]),np.abs(self.ns[ns:ne]),np.abs(self.ud[ns:ne])])\n\n        fig = plt.figure()\n\n        plt.rcParams['xtick.direction'] = 'in'\n        plt.rcParams['ytick.direction'] = 'in'\n\n        ax1 = fig.add_subplot(311)\n        ax2 = fig.add_subplot(312)\n        ax3 = fig.add_subplot(313)\n\n        if 'code' in self.header and 'record_time' in self.header:\n            ax1.set_title(self.header['code']+\" \"+self.header['record_time'])\n\n\n        ax1.plot(self.tim,self.ew,color='k',lw=1)\n        ax2.plot(self.tim,self.ns,color='k',lw=1)\n        ax3.plot(self.tim,self.ud,color='k',lw=1)\n\n\n\n        ax1.set_xlim(start,end)\n        ax2.set_xlim(start,end)\n        ax3.set_xlim(start,end)\n\n        ax1.set_ylim(-1.2*amax,1.2*amax)\n        ax2.set_ylim(-1.2*amax,1.2*amax)\n        ax3.set_ylim(-1.2*amax,1.2*amax)\n\n        ax1.set_xticklabels([])\n        ax2.set_xticklabels([])\n\n        ax3.set_xlabel(\"time [s]\")\n\n        ax1.text(0.02,0.85,\"EW\",transform=ax1.transAxes)\n        ax2.text(0.02,0.85,\"NS\",transform=ax2.transAxes)\n        ax3.text(0.02,0.85,\"UD\",transform=ax3.transAxes)\n\n        plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=0, hspace=0)\n        if output_file is None:\n            plt.show()\n        else:\n            plt.savefig(output_file)\n\n    def plot_rs_all(self):\n        fig = plt.figure()\n\n        plt.rcParams['xtick.direction'] = 'in'\n        plt.rcParams['ytick.direction'] = 'in'\n\n        plt.subplot(331)\n        plt.title(\"Sa\")\n        plt.plot(self.period,self.Sa_ew,color='maroon',lw=1.5)\n        plt.ylabel(\"EW\")\n\n        plt.subplot(332)\n        plt.title(\"Sv\")\n        plt.plot(self.period,self.Sv_ew,color='darkorange',lw=1.5)\n\n        plt.subplot(333)\n        plt.title(\"Sd\")\n        plt.plot(self.period,self.Sd_ew,color='darkgreen',lw=1.5)\n\n\n        plt.subplot(334)\n        plt.plot(self.period,self.Sa_ns,color='maroon',lw=1.5)\n        plt.ylabel(\"NS\")\n\n        plt.subplot(335)\n        plt.plot(self.period,self.Sv_ns,color='darkorange',lw=1.5)\n\n        plt.subplot(336)\n        plt.plot(self.period,self.Sd_ns,color='darkgreen',lw=1.5)\n\n\n        plt.subplot(337)\n        plt.plot(self.period,self.Sa_ud,color='maroon',lw=1.5)\n        plt.ylabel(\"UD\")\n        plt.xlabel(\"period [s]\")\n\n        plt.subplot(338)\n        plt.plot(self.period,self.Sv_ud,color='darkorange',lw=1.5)\n        plt.xlabel(\"period [s]\")\n\n        plt.subplot(339)\n        plt.plot(self.period,self.Sd_ud,color='darkgreen',lw=1.5)\n        plt.xlabel(\"period [s]\")\n\n        axs = plt.gcf().get_axes()\n        for ax in axs:\n            plt.axes(ax)\n            plt.xscale(\"log\")\n            plt.yscale(\"log\")\n            plt.xlim(0.1,10)\n            ax.xaxis.set_major_formatter(FormatStrFormatter('%.1f'))\n            ax.yaxis.set_major_formatter(FormatStrFormatter('%.2f'))\n\n        plt.show()\n\n    def plot_rs_max(self):\n        fig = plt.figure()\n\n        plt.rcParams['xtick.direction'] = 'in'\n        plt.rcParams['ytick.direction'] = 'in'\n\n        plt.subplot(231)\n        plt.xscale(\"log\")\n        plt.yscale(\"log\")\n        plt.title(\"Sa\")\n        plt.plot(self.period,self.Sa,color='maroon',lw=1.5)\n        plt.ylabel(\"Sa\")\n\n        plt.subplot(232)\n        plt.xscale(\"log\")\n        plt.yscale(\"log\")\n        plt.title(\"Sv\")\n        plt.plot(self.period,self.Sv,color='darkorange',lw=1.5)\n        plt.ylabel(\"Sv\")\n\n        plt.subplot(233)\n        plt.xscale(\"log\")\n        plt.yscale(\"log\")\n        plt.title(\"Sd\")\n        plt.plot(self.period,self.Sd,color='darkgreen',lw=1.5)\n        plt.ylabel(\"Sd\")\n\n\n        plt.subplot(234)\n        plt.xscale(\"log\")\n        plt.ylim(-90,90)\n        plt.plot(self.period,self.Sa_rot,color='maroon',lw=1.5)\n        plt.ylabel(\"azimth\")\n        plt.xlabel(\"period [s]\")\n\n        plt.subplot(235)\n        plt.xscale(\"log\")\n        plt.ylim(-90,90)\n        plt.plot(self.period,self.Sv_rot,color='darkorange',lw=1.5)\n        plt.xlabel(\"period [s]\")\n\n        plt.subplot(236)\n        plt.xscale(\"log\")\n        plt.ylim(-90,90)\n        plt.plot(self.period,self.Sd_rot,color='darkgreen',lw=1.5)\n        plt.xlabel(\"period [s]\")\n\n        plt.show()\n\n    def plot_ps_all(self):\n        self.ps.plot_ps_all()\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.__init__","title":"<code>__init__(header, tim, ew, ns, ud)</code>","text":"<p>vectors \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316</p> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>header</code> <code>dict</code> <p>\u30d8\u30c3\u30c0\u30fc\u60c5\u5831</p> \u5fc5\u9808 <code>tim</code> <code>ndarray</code> <p>\u6642\u9593\u8ef8\u30c7\u30fc\u30bf</p> \u5fc5\u9808 <code>ew</code> <code>ndarray</code> <p>EW\u6210\u5206\u306e\u30c7\u30fc\u30bf</p> \u5fc5\u9808 <code>ns</code> <code>ndarray</code> <p>NS\u6210\u5206\u306e\u30c7\u30fc\u30bf</p> \u5fc5\u9808 <code>ud</code> <code>ndarray</code> <p>UD\u6210\u5206\u306e\u30c7\u30fc\u30bf</p> \u5fc5\u9808 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def __init__(self,header,tim,ew,ns,ud):\n    \"\"\"vectors \u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n\n    Args:\n        header (dict): \u30d8\u30c3\u30c0\u30fc\u60c5\u5831\n        tim (numpy.ndarray): \u6642\u9593\u8ef8\u30c7\u30fc\u30bf\n        ew (numpy.ndarray): EW\u6210\u5206\u306e\u30c7\u30fc\u30bf\n        ns (numpy.ndarray): NS\u6210\u5206\u306e\u30c7\u30fc\u30bf\n        ud (numpy.ndarray): UD\u6210\u5206\u306e\u30c7\u30fc\u30bf\n    \"\"\"\n    self.header = header\n    self.tim = tim\n    self.ew = ew\n    self.ns = ns\n    self.ud = ud\n    self.dt = tim[1] - tim[0]\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.append","title":"<code>append(v)</code>","text":"<p>vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f8c\u308d\u306b\u7e4b\u3052\u308b</p> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>v</code> <code>vectors</code> <p>\u5f8c\u308d\u306b\u8ffd\u52a0\u3059\u308b vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8</p> \u5fc5\u9808 <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>vectors</code> <p>\u5f8c\u308d\u306bv\u304c\u8ffd\u52a0\u3055\u308c\u305f\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def append(self,v):\n    \"\"\"vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f8c\u308d\u306b\u7e4b\u3052\u308b\n\n    Args:\n        v (vectors): \u5f8c\u308d\u306b\u8ffd\u52a0\u3059\u308b vectors \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n    Returns:\n        vectors: \u5f8c\u308d\u306bv\u304c\u8ffd\u52a0\u3055\u308c\u305f\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    \"\"\"\n    v2 = self\n    v2.header = self.header\n    v2.ew = np.hstack((self.ew,v.ew))\n    v2.ns = np.hstack((self.ns,v.ns))\n    v2.ud = np.hstack((self.ud,v.ud))\n\n    dt = self.tim[1] - self.tim[0]\n    shift = np.full_like(v.tim,self.tim[-1]+dt)\n    tim = v.tim + shift\n\n    v2.tim = np.hstack((self.tim,tim))\n    v2.header['ntim'] = len(v2.tim)\n\n    return v2\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.bandpass","title":"<code>bandpass(low=0.05, high=10)</code>","text":"<pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d0\u30f3\u30c9\u30d1\u30b9\u30d5\u30a3\u30eb\u30bf\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>low</code> <code>float</code> <p>\u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09</p> <code>0.05</code> <code>high</code> <code>float</code> <p>\u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09</p> <code>10</code> <p>\u623b\u308a\u5024\uff1a</p> \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <p>\u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u30d5\u30a3\u30eb\u30bf\u9069\u7528\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def bandpass(self,low=0.05,high=10):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d0\u30f3\u30c9\u30d1\u30b9\u30d5\u30a3\u30eb\u30bf\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n\n    Args:\n        low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\n        high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\n\n    Returns:\n        \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u30d5\u30a3\u30eb\u30bf\u9069\u7528\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n    \"\"\"\n    v2 = copy.deepcopy(self)\n    v2.ew = vector.bandpass(self.ew,self.dt,low,high)\n    v2.ns = vector.bandpass(self.ns,self.dt,low,high)\n    v2.ud = vector.bandpass(self.ud,self.dt,low,high)\n\n    return v2\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.integration","title":"<code>integration(low=0.2, high=50)</code>","text":"<pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u3066\u6570\u5024\u7a4d\u5206\u3059\u308b\uff0e\u6307\u5b9a\u3057\u305f\u5468\u6ce2\u6570\u5e2f\u57df\uff08low - high\uff09\u4ee5\u5916\u306f\u30ab\u30c3\u30c8\u3055\u308c\u308b\uff0e\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>low</code> <code>float</code> <p>\u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 0.2</p> <code>0.2</code> <code>high</code> <code>float</code> <p>\u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50</p> <code>50</code> <p>\u623b\u308a\u5024\uff1a</p> \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <p>\u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e self.ew, self.ns, self.ud \u304c\u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def integration(self,low=0.2,high=50):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u30d5\u30fc\u30ea\u30a8\u5909\u63db\u3092\u7528\u3044\u3066\u6570\u5024\u7a4d\u5206\u3059\u308b\uff0e\u6307\u5b9a\u3057\u305f\u5468\u6ce2\u6570\u5e2f\u57df\uff08low - high\uff09\u4ee5\u5916\u306f\u30ab\u30c3\u30c8\u3055\u308c\u308b\uff0e\n\n    Args:\n        low (float): \u4f4e\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 0.2\n        high (float): \u9ad8\u57df\u30ab\u30c3\u30c8\u30aa\u30d5\u5468\u6ce2\u6570\uff08Hz\uff09\uff0e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\n\n    Returns:\n        \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e self.ew, self.ns, self.ud \u304c\u7a4d\u5206\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n    \"\"\"\n    v2 = copy.deepcopy(self)\n    v2.ew = vector.integration(self.ew,self.dt,low,high)\n    v2.ns = vector.integration(self.ns,self.dt,low,high)\n    v2.ud = vector.integration(self.ud,self.dt,low,high)\n\n    return v2\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.jma_seismic_intensity","title":"<code>jma_seismic_intensity(print_result=True)</code>","text":"<pre><code>\u6c17\u8c61\u5e81\u8a08\u6e2c\u9707\u5ea6\u3092\u8a08\u7b97\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>print_result</code> <code>(bool, optional)</code> <p>\u7d50\u679c\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue</p> <code>True</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>float</code> <p>\u8a08\u7b97\u3055\u308c\u305f\u8a08\u6e2c\u9707\u5ea6\u5024</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def jma_seismic_intensity(self,print_result=True):\n    \"\"\"\n        \u6c17\u8c61\u5e81\u8a08\u6e2c\u9707\u5ea6\u3092\u8a08\u7b97\n\n    Args:\n        print_result (bool,optional): \u7d50\u679c\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue\n\n    Returns:\n        float: \u8a08\u7b97\u3055\u308c\u305f\u8a08\u6e2c\u9707\u5ea6\u5024\n    \"\"\"\n    si = jsi.jsi(self.ew,self.ns,self.ud,self.dt)\n\n    if print_result:\n        print(\"JMA Seismic Intensity: \", si)\n\n    return si\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.output","title":"<code>output(output_file, fmt='%15.7f')</code>","text":"<pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\u3059\u308b\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>output_ffile</code> <code>str</code> <p>\u51fa\u529b\u5148\u30d5\u30a1\u30a4\u30eb\u540d</p> \u5fc5\u9808 <code>fmt</code> <code>str</code> <p>\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8</p> <code>'%15.7f'</code> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def output(self,output_file,fmt=\"%15.7f\"):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\u3059\u308b\n\n    Args:\n        output_ffile (str): \u51fa\u529b\u5148\u30d5\u30a1\u30a4\u30eb\u540d\n        fmt (str): \u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n    \"\"\"\n    header = str(self.header)\n    output = np.c_[self.tim,self.ew,self.ns,self.ud]\n    np.savetxt(output_file,output,fmt=fmt,header=header,comments=\"#\")\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.peak_ground_2d","title":"<code>peak_ground_2d(print_result=True)</code>","text":"<pre><code>\u6c34\u5e732\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>print_result</code> <code>bool</code> <p>\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b</p> <code>True</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>float</code> <p>\u6700\u5927\u5024</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def peak_ground_2d(self,print_result=True):\n    \"\"\"\n        \u6c34\u5e732\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n\n    Args:\n        print_result (bool): \u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\n    Returns:\n        float: \u6700\u5927\u5024\n    \"\"\"\n    PG = math.sqrt(np.max(self.ew**2 + self.ns**2))\n\n    if print_result:\n        print(\"PGX (2d): \",PG)\n\n    return PG\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.peak_ground_3d","title":"<code>peak_ground_3d(print_result=True)</code>","text":"<pre><code>3\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>print_result</code> <code>bool</code> <p>\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b</p> <code>True</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>float</code> <p>\u6700\u5927\u5024</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def peak_ground_3d(self,print_result=True):\n    \"\"\"\n        3\u6210\u5206\u5408\u6210\u6ce2\u306e\u6700\u5927\u5024\uff08PGA\u3084PGV\uff09\u3092\u7b97\u51fa\u3059\u308b\n\n    Args:\n        print_result (bool): \u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\n    Returns:\n        float: \u6700\u5927\u5024\n    \"\"\"\n    PG = math.sqrt(np.max(self.ew**2 + self.ns**2 + self.ud**2))\n\n    if print_result:\n        print(\"PGX (3d): \",PG)\n\n    return PG\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.plot_all","title":"<code>plot_all(start=0, end=60, to_end=False, output_file=None)</code>","text":"<pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u4e00\u62ec\u3057\u3066\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>start</code> <code>float</code> <p>\u8868\u793a\u306e\u958b\u59cb\u6642\u523b\uff08\u79d2\uff09</p> <code>0</code> <code>end</code> <code>float</code> <p>\u8868\u793a\u306e\u7d42\u4e86\u6642\u523b\uff08\u79d2\uff09</p> <code>60</code> <code>to_end</code> <code>bool</code> <p>\u6ce2\u5f62\u30c7\u30fc\u30bf\u306e\u6700\u5f8c\u307e\u3067\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue</p> <code>False</code> <code>output_file</code> <code>str</code> <p>\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306b\u753b\u50cf\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u5834\u5408\u306f\uff0c\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\uff0e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u62e1\u5f35\u5b50\u306b\u5fdc\u3058\u305f\u5f62\u5f0f\u3067\u4fdd\u5b58\u3055\u308c\u308b\uff0e</p> <code>None</code> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def plot_all(self,start=0,end=60,to_end=False,output_file=None):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u306e\u6642\u523b\u6b74\u6ce2\u5f62\u3092\u4e00\u62ec\u3057\u3066\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\n\n    Args:\n        start (float): \u8868\u793a\u306e\u958b\u59cb\u6642\u523b\uff08\u79d2\uff09\n        end (float): \u8868\u793a\u306e\u7d42\u4e86\u6642\u523b\uff08\u79d2\uff09\n        to_end (bool): \u6ce2\u5f62\u30c7\u30fc\u30bf\u306e\u6700\u5f8c\u307e\u3067\u8868\u793a\u3059\u308b\u5834\u5408\u306fTrue\n        output_file (str): \u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306b\u753b\u50cf\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u5834\u5408\u306f\uff0c\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\uff0e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u62e1\u5f35\u5b50\u306b\u5fdc\u3058\u305f\u5f62\u5f0f\u3067\u4fdd\u5b58\u3055\u308c\u308b\uff0e\n    \"\"\"\n    if to_end:\n        start = self.tim[0]\n        end = self.tim[-1]\n        amax = np.amax(np.r_[np.abs(self.ew),np.abs(self.ns),np.abs(self.ud)])\n    else:\n        ns = int(start/self.dt)\n        ne = int(end/self.dt)\n        amax = np.amax(np.r_[np.abs(self.ew[ns:ne]),np.abs(self.ns[ns:ne]),np.abs(self.ud[ns:ne])])\n\n    fig = plt.figure()\n\n    plt.rcParams['xtick.direction'] = 'in'\n    plt.rcParams['ytick.direction'] = 'in'\n\n    ax1 = fig.add_subplot(311)\n    ax2 = fig.add_subplot(312)\n    ax3 = fig.add_subplot(313)\n\n    if 'code' in self.header and 'record_time' in self.header:\n        ax1.set_title(self.header['code']+\" \"+self.header['record_time'])\n\n\n    ax1.plot(self.tim,self.ew,color='k',lw=1)\n    ax2.plot(self.tim,self.ns,color='k',lw=1)\n    ax3.plot(self.tim,self.ud,color='k',lw=1)\n\n\n\n    ax1.set_xlim(start,end)\n    ax2.set_xlim(start,end)\n    ax3.set_xlim(start,end)\n\n    ax1.set_ylim(-1.2*amax,1.2*amax)\n    ax2.set_ylim(-1.2*amax,1.2*amax)\n    ax3.set_ylim(-1.2*amax,1.2*amax)\n\n    ax1.set_xticklabels([])\n    ax2.set_xticklabels([])\n\n    ax3.set_xlabel(\"time [s]\")\n\n    ax1.text(0.02,0.85,\"EW\",transform=ax1.transAxes)\n    ax2.text(0.02,0.85,\"NS\",transform=ax2.transAxes)\n    ax3.text(0.02,0.85,\"UD\",transform=ax3.transAxes)\n\n    plt.subplots_adjust(left=None, bottom=None, right=None, top=None, wspace=0, hspace=0)\n    if output_file is None:\n        plt.show()\n    else:\n        plt.savefig(output_file)\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.response_spectrum_max","title":"<code>response_spectrum_max()</code>","text":"<pre><code>\u6c34\u5e73\u6210\u5206\u306e\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u3092RotD100\u3067\u7b97\u51fa\u3059\u308b\uff0e\u5b9f\u884c\u3059\u308b\u3068vectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u4ee5\u4e0b\u306eAttributes\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n</code></pre> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>None</code> <p>\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u5024\u3092\u8fd4\u3055\u306a\u3044\uff0e\u4ee3\u308f\u308a\u306b\u4ee5\u4e0b\u306e\u5c5e\u6027\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e - Sa: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%) - Sv: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%) - Sd: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%) - Sa_rot: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09 - Sv_rot: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09 - Sd_rot: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def response_spectrum_max(self):\n    \"\"\"\n        \u6c34\u5e73\u6210\u5206\u306e\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u3092RotD100\u3067\u7b97\u51fa\u3059\u308b\uff0e\u5b9f\u884c\u3059\u308b\u3068vectors\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u4ee5\u4e0b\u306eAttributes\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n\n    Returns:\n        None: \u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u5024\u3092\u8fd4\u3055\u306a\u3044\uff0e\u4ee3\u308f\u308a\u306b\u4ee5\u4e0b\u306e\u5c5e\u6027\u304c\u8ffd\u52a0\u3055\u308c\u308b\uff0e\n            - **Sa**: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n            - **Sv**: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n            - **Sd**: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\uff08h=5%)\n            - **Sa_rot**: \u52a0\u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n            - **Sv_rot**: \u901f\u5ea6\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n            - **Sd_rot**: \u5909\u4f4d\u5fdc\u7b54\u30b9\u30da\u30af\u30c8\u30eb\u304c\u6700\u5927\u3068\u306a\u308b\u65b9\u4f4d\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n    \"\"\"\n    self.period = np.logspace(-1,1,100)\n\n    self.Sa, self.Sv, self.Sd, self.Sa_rot, self.Sv_rot, self.Sd_rot = response.response_spectrum_max(self.ew,self.ns,self.period,self.dt)\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.rotation","title":"<code>rotation(rot, deg='deg')</code>","text":"<pre><code>\u6c34\u5e732\u6210\u5206\uff08EW, NS\uff09\u3092\u6307\u5b9a\u3057\u305f\u89d2\u5ea6\u3060\u3051\u56de\u8ee2\u3055\u305b\u308b\n</code></pre> <p>\u5f15\u6570\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 \u30c7\u30d5\u30a9\u30eb\u30c8 <code>rot</code> <code>float</code> <p>\u56de\u8ee2\u89d2</p> \u5fc5\u9808 <code>deg</code> <code>str</code> <p>\u89d2\u5ea6\u306e\u5358\u4f4d\u3002'deg'\uff08\u5ea6\uff09\u307e\u305f\u306f 'rad'\uff08\u30e9\u30b8\u30a2\u30f3\uff09</p> <code>'deg'</code> <p>\u623b\u308a\u5024\uff1a</p> \u540d\u524d \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <code>vectors</code> <p>\u56de\u8ee2\u5f8c\u306e\u6210\u5206\u3092\u6301\u3064\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def rotation(self,rot,deg='deg'):\n    \"\"\"\n        \u6c34\u5e732\u6210\u5206\uff08EW, NS\uff09\u3092\u6307\u5b9a\u3057\u305f\u89d2\u5ea6\u3060\u3051\u56de\u8ee2\u3055\u305b\u308b\n\n    Args:\n        rot (float): \u56de\u8ee2\u89d2\n        deg (str): \u89d2\u5ea6\u306e\u5358\u4f4d\u3002'deg'\uff08\u5ea6\uff09\u307e\u305f\u306f 'rad'\uff08\u30e9\u30b8\u30a2\u30f3\uff09\n\n    Returns:\n        vectors: \u56de\u8ee2\u5f8c\u306e\u6210\u5206\u3092\u6301\u3064\u65b0\u3057\u3044 vectors \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    \"\"\"\n    if deg == 'deg':\n        rad = rot/180.0 * math.pi\n    else:\n        rad = rot\n\n    p = self.ew * math.sin(rad) + self.ns * math.cos(rad)\n    n = self.ew * math.cos(rad) - self.ns * math.sin(rad)\n\n    v2 = copy.deepcopy(self)\n    v2.ew = n\n    v2.ns = p\n\n    return v2\n</code></pre>"},{"location":"reference/#PySGM.vector.vectors.trend_removal","title":"<code>trend_removal(sec=None)</code>","text":"<pre><code>3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u7dda\u5f62\u30c8\u30ec\u30f3\u30c9\u306e\u9664\u53bb\uff08\u57fa\u7dda\u88dc\u6b63\uff09\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n</code></pre> <p>\u623b\u308a\u5024\uff1a</p> \u30bf\u30a4\u30d7 \u30c7\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 <p>\u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u88dc\u6b63\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09</p> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4f4d\u7f6e\uff1a <code>src/PySGM/vector.py</code> <pre><code>def trend_removal(self,sec=None):\n    \"\"\"\n        3\u6210\u5206\uff08EW, NS, UD\uff09\u3059\u3079\u3066\u306b\u5bfe\u3057\u3066\u3001\u7dda\u5f62\u30c8\u30ec\u30f3\u30c9\u306e\u9664\u53bb\uff08\u57fa\u7dda\u88dc\u6b63\uff09\u3092\u4e00\u62ec\u9069\u7528\u3059\u308b\n\n    Args:\n        \u306a\u3057\n\n    Returns:\n        \u306a\u3057\uff08\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5185\u306e\u5404\u6210\u5206\u304c\u88dc\u6b63\u5f8c\u306e\u6ce2\u5f62\u306b\u66f4\u65b0\u3055\u308c\u308b\uff09\n    \"\"\"\n\n    if sec is None:\n        self.ew = self.ew - np.average(self.ew)\n        self.ns = self.ns - np.average(self.ns)\n        self.ud = self.ud - np.average(self.ud)\n    else:\n        n = int(sec/self.dt)\n        self.ew = self.ew - np.average(self.ew[:n])\n        self.ns = self.ns - np.average(self.ns[:n])\n        self.ud = self.ud - np.average(self.ud[:n])\n</code></pre>"}]}